# Планировщик задач (Planner)
## Описание проекта

Это веб‑приложение для управления задачами с использованием языка Go и базы данных SQLite.
Приложение позволяет:

	•	создавать одноразовые и повторяющиеся задачи;
	•	получать список ближайших задач;
	•	редактировать, удалять или отмечать задачи как выполненные;
	•	рассчитывать следующую дату выполнения в зависимости от указанных правил (`d N`, `y`, `w`, `m`).

Проект создан в учебных целях и демонстрирует практическую работу с веб‑сервером на Go, SQLite, обработчиками API, JSON‑сериализацией и модульным тестированием.

### Локальный запуск проекта
Требования:

	•	Go 1.21+
	•	SQLite3
	•	(опционально) Docker

1. Создание .env файла
В корне проекта должен быть файл `.env` со следующими параметрами:

```bash
TODO_PORT=7540
TODO_DBFILE=./scheduler.db
```

2. Установка зависимостей
```bash
go mod tidy
```

3. Запуск приложения

```bash
go run main.go
```

4. Проверка работы
После запуска сервер будет доступен в браузере по адресу:

```bash
http://localhost:7540
```

В интерфейсе можно добавлять, удалять и редактировать задачи.

### Запуск тестов

Перед тестированием убедись, что переменные окружения указаны в `.env` или настроены в `tests/settings.go`.
В файле `tests/settings.go` значения по умолчанию должны быть:

```go
var Port = 7540
var DBFile = "../scheduler.db
var FullNextDate = false
var Search = false
var Token = ``
```

Запуск тестов из корня проекта:

```bash
go test ./tests
```

Если тесты не находят файл базы, можно указать явно:

```bash
TODO_DBFILE=../scheduler.db go test ./tests
```

### Сборка и запуск через Docker
1. Сборка образа

```bash
docker build -t planner-app .
```

2. Запуск контейнера

```bash
docker run -d -p 7540:7540 --name planner planner-app
```

После запуска приложение доступно по адресу:

```bash
http://localhost:7540
```

### Структура проекта

```go
planner/
  ├── main.go
  ├── go.mod / go.sum
  ├── .env
  ├── web/                # фронтенд (HTML, CSS, JS)
  ├── pkg/
  │   ├── api/            # обработчики API
  │   ├── db/             # работа с SQLite
  │   ├── server/         # запуск веб‑сервера
  └── tests/              # модульные и интеграционные тесты
```